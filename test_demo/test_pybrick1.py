# pybricks blocks file:{"blocks":{"languageVersion":0,"blocks":[{"type":"blockGlobalSetup","id":"bjK,wS1MYO7aiYkFSwd{","x":0,"y":0,"deletable":false,"next":{"block":{"type":"variables_set_prime_hub","id":"*nUOTiL!JOw_;+)fpxC|","extraState":{"optionLevel":1},"fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR"}},"inputs":{"AXIS_TOP":{"shadow":{"type":"blockParametersAxis","id":"Udyvsjad{AnnF77,+%0|","fields":{"VALUE":"z"}}},"AXIS_FRONT":{"shadow":{"type":"blockParametersAxis","id":"pZI3ey^U4HJRWn4Mapu1","fields":{"VALUE":"y"}}}},"next":{"block":{"type":"variables_set_motor","id":"Q_$hfMWr}JRfIW?5EMMW","fields":{"VAR":{"id":"*)Xij(D^LX0bP*,|*},}"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"Z}AZ`|XthZ4Ua{@6~XKk","fields":{"NAME":"D"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"yoXfaN_=V:{xK;D%U.$/","fields":{"SELECTION":"Direction.COUNTERCLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"I39g@d;O;pQ@ajNR*[2n","fields":{"VAR":{"id":"q+)l[,CUxiS/x(9L^DT)"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"r=LJfr*/U0zuzKP:[QHS","fields":{"NAME":"F"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"=(?ahtNj@7C4RQOEZS0p","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"B|;Q*+DFdk9!VQ{GV!7d","fields":{"VAR":{"id":"d.G_{Xk3gi{.MgqyTw*v"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"N7xUf*M;5[qR+h9rTbfo","fields":{"NAME":"C"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"7{;|`.c`4N|%n++f%i|^","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"w+Hr3Oqj0})|{SX?!E5!","fields":{"VAR":{"id":"iC+}r+I!,XK,qZzs1(yI"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"K@)]DK[hSZueL.CkMIyn","fields":{"NAME":"B"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"*?u!HfRF~#Eu%G_F54Nz","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_set_color_sensor","id":"E^L2Md%}}oH5WK{%8jfw","extraState":{"optionLevel":0},"fields":{"VAR":{"id":"i:h5wH3ca)*BMJ{HXTS,"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"X4U[NOBfd~c`,/AQHXt+","fields":{"NAME":"E"}}}},"next":{"block":{"type":"variables_set_color_sensor","id":"#.mH++([et8Tl^/4u)cd","extraState":{"optionLevel":0},"fields":{"VAR":{"id":"Dl}ZGfBep1FW)38J/7ck"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"U84sS$/O%bLYap;DiifH","fields":{"NAME":"A"}}}},"next":{"block":{"type":"variables_set_drive_base","id":"|GO.(/9P,mq0{B$O2uRM","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx"}},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"c_2GmXCgjIriBxBns!+0","fields":{"VAR":{"id":"*)Xij(D^LX0bP*,|*},}","name":"LLM","type":"Motor"}}}},"VAR2":{"shadow":{"type":"variables_get_motor_device","id":"K=L+r[8{8RqINWqolg3A","fields":{"VAR":{"id":"q+)l[,CUxiS/x(9L^DT)","name":"RLM","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_distance","id":"v@q9tSsA-I8J*l_CI9~)","fields":{"VALUE0":56}}},"VALUE1":{"shadow":{"type":"unit_distance","id":"o*Ztarg]=p(f}(z,xq{(","fields":{"VALUE0":116}}}}}}}}}}}}}}}}}}}}},{"type":"blockGlobalStart","id":"3tJe|AWl0baN(wH9a$@.","x":0,"y":481,"deletable":false,"next":{"block":{"type":"blockPrint","id":"j,,T}?rBkaW$1v?olp4p","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"!x5.0YiWya^`(y)yO5B8","fields":{"TEXT":"Hello, Pybricks!"}}}},"next":{"block":{"type":"blockWaitTime","id":"PQLCqSlO}e:!*YhQiBri","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"c^abc/L`:v0ObHjhiJ/9","fields":{"VALUE0":2000}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"($48ZzpK#s5:3D3H]F1D","extraState":{"optionLevel":1},"fields":{"METHOD":"DRIVEBASE_STRAIGHT_SPEED"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"d|fZM4Yy$Nu61+Fc8zpm","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_speed","id":"imy:5ZE(|3z.;zrL`^[h","fields":{"VALUE0":950}}}},"next":{"block":{"type":"blockMotorConfigure","id":"RZl._9W;@${^nO:%hU.1","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_ACCELERATION"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"q[fz(=eC(avR#eqkgAS@","fields":{"VAR":{"id":"*)Xij(D^LX0bP*,|*},}","name":"LLM","type":"Motor"}}}},"ARG0":{"shadow":{"type":"unit_angularAcceleration","id":"WEX53Aq^)4)c5-D(^-L3","fields":{"VALUE0":2000}}}},"next":{"block":{"type":"blockMotorConfigure","id":"fhaPzv4H0XA~bO*aCe;(","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_ACCELERATION"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"|{jdXsK%3+gdt_jfhmh3","fields":{"VAR":{"id":"iC+}r+I!,XK,qZzs1(yI","name":"RMM","type":"Motor"}}}},"ARG0":{"shadow":{"type":"unit_angularAcceleration","id":"!8BRD)zh31r*Pa8/T)vh","fields":{"VALUE0":2000}}}},"next":{"block":{"type":"blockDriveBaseUseGyro","id":"7OHurVpMP!fnCMb`tLr2","fields":{"METHOD":"DRIVEBASE_USE_GYRO_TRUE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"QE//:Q$rz64TkYsTcAz_","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}}},"next":{"block":{"type":"blockDriveBaseResetWithValues","id":"0)T17tUFMGxgT$,U~5_Y","inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"ufO3P+[t:i,-{i@FK2vG","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"VALUE0":{"shadow":{"type":"unit_distance","id":"AA~T.6w?HR^l+hxdi5NB","fields":{"VALUE0":0}}},"VALUE1":{"shadow":{"type":"unit_angle","id":"#{]b3k/;XxJ`}ZUcTE*5","fields":{"VALUE0":0}}}},"next":{"block":{"type":"blockWaitUntil","id":"cB,/V|hKm9FQe!Xvm`UU","inputs":{"BOOL":{"shadow":{"type":"blockLogicTrue","id":"rF()!7L2d)zTgPwSD}!]"},"block":{"type":"blockImuStatus","id":"KZW:2%T`5x2}1azxhROD","extraState":{"optionLevel":0},"fields":{"METHOD":"IMU_GET_STATIONARY"},"inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"OL||`1:Pd?*c^o^39~ej","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}}}}}},"next":{"block":{"type":"blockImuResetHeading","id":"Q8HmfpA6)j5^Zc(AiL@9","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"=jz9`R3b?)Pe6`2u?J^@","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"VALUE0":{"shadow":{"type":"unit_angle","id":"[kuK0pAf+St0e`jH__3]","fields":{"VALUE0":0}}}},"next":{"block":{"type":"blockPrint","id":"`8iv:xWiM,)I1!OKQ/tF","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"|^2iP_NG%}rR}P;0zeDx","fields":{"TEXT":"abc"}},"block":{"type":"blockBatteryMeasure","id":"/{)+(uTG(HcN6Wh_rW];","extraState":{"optionLevel":0},"fields":{"METHOD":"BATTERY_GET_VOLTAGE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_battery_hub","id":"#~xiB/_2w|vwF+1o0/Bk","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}}}}}},"next":{"block":{"type":"blockWaitTime","id":"vy92+75Ia/?+7JMEd/gB","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"@qurpXpGN==[*alBCn|Q","fields":{"VALUE0":3000}}}},"next":{"block":{"type":"blockSpeakerBeep","id":"|1Cg`c;4JgpbOvB2[=k8","inputs":{"VAR":{"shadow":{"type":"variables_get_speaker_hub","id":":29=5P6u8^,:nPRFqbaJ","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"VALUE0":{"shadow":{"type":"unit_frequency","id":"Z5KsGyA%P9Kc!R3]T#eR","fields":{"VALUE0":500}}},"VALUE1":{"shadow":{"type":"unit_time","id":"/K1/%n0]T)~3SU4Z*IP1","fields":{"VALUE0":1000}}}},"next":{"block":{"type":"blockMultiTask","id":"]5~qT89w5^kuo4C`;n:@","extraState":{"optionLevel":0},"fields":{"METHOD":"MULTITASK_ALL"},"inputs":{"TASK0":{"block":{"type":"blockDriveBaseDrive","id":"!$`@#D,=3zLL~s;+8u`M","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"Kl:{{E]jL:[?kWl}cOqF","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"kpl+H-(qaEd[}Yl0GBjJ","fields":{"VALUE0":500}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"3.x%6#,FQKI/PGC)%OH.","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockWaitTime","id":"$)[cCSf24?Vp_L:0yi=G","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"bHC6=^97Nu98PwU1(_$J","fields":{"VALUE0":1000}}}},"next":{"block":{"type":"blockDriveBaseDrive","id":"!MRP$88^H,cg6-X)x[h9","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"e14U/y_PDQ4vLM;p|on~","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"S-B8|q/njf|gu~K)KwL7","fields":{"VALUE0":-500}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"QV+4PSyoT9(B=`tXNgi*","fields":{"VALUE":"Stop.HOLD"}}}}}}}}}},"TASK1":{"block":{"type":"blockMultiTask","id":"z8JCO0qyYDTMBP99XV7d","extraState":{"optionLevel":0},"fields":{"METHOD":"MULTITASK_ALL"},"inputs":{"TASK0":{"block":{"type":"blockMotorRun","id":"wcPm5dcP|_g$]FmNm*Eu","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_RUN_FOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"0WUi^K2T.*3!pK:F)[o!","fields":{"VAR":{"id":"d.G_{Xk3gi{.MgqyTw*v","name":"LMM","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"^90w)ib1`7TE6BwNX^!N","fields":{"VALUE0":500}}},"ANGLE":{"shadow":{"type":"unit_angle","id":"!|UWFl{4zwZ.p(J_fF$?","fields":{"VALUE0":720}}},"THEN":{"shadow":{"type":"parameters_stop_4","id":"I(J,/-(]|JHKCsxBO{n}","fields":{"VALUE":"Stop.HOLD"}}}}}},"TASK1":{"block":{"type":"blockMotorRun","id":"DwShKtha!Uy?d!:Iy7}V","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_RUN_FOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"vFN)VFz%gW%TyN3adwW%","fields":{"VAR":{"id":"iC+}r+I!,XK,qZzs1(yI","name":"RMM","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"S/$m6cDEhk|nLT:MA8sq","fields":{"VALUE0":500}}},"ANGLE":{"shadow":{"type":"unit_angle","id":"[jd/fs#p[?t7M$g~1B|D","fields":{"VALUE0":-720}}},"THEN":{"shadow":{"type":"parameters_stop_4","id":"Z8k#iu04!}DAZ1kD]H2p","fields":{"VALUE":"Stop.HOLD"}}}}}}}}}},"next":{"block":{"type":"blockFunctionCallerStatement","id":"b`NY%;pjQ48h=:bi@Pk#","extraState":{"optionLevel":0},"fields":{"ICON":"TASK","VAR":{"id":"8PF}#EYc#qiyp60Z=hYp"}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},{"type":"variables_setup_function","id":"{xcEMqK9HnaJ;=#@eH_]","x":0,"y":1424,"extraState":{"optionLevel":0},"fields":{"ICON":"TASK","VAR":{"id":"8PF}#EYc#qiyp60Z=hYp"}},"inputs":{"STACK":{"block":{"type":"blockLightMatrixDo","id":"wwxSc~TsF0I`FPIp8Xk#","extraState":{"optionLevel":1},"fields":{"METHOD":"LIGHT_MATRIX_NUMBER"},"inputs":{"VAR":{"shadow":{"type":"variables_get_light_matrix_hub","id":"Ix]bS,hr68hO.ncexN/1","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"9S1ne7=,|4G.JPHk+@2z","fields":{"NUM":42}}}},"next":{"block":{"type":"blockSpeakerBeep","id":"f2}R8|%7F^1J*CPi~+U~","inputs":{"VAR":{"shadow":{"type":"variables_get_speaker_hub","id":"{4R%wL(-VV/TtFK?624v","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"VALUE0":{"shadow":{"type":"unit_frequency","id":"FyF|l3p_ZNO-qa7g|7pY","fields":{"VALUE0":500}}},"VALUE1":{"shadow":{"type":"unit_time","id":"/$!g$mmV}/;~o+PD*/p8","fields":{"VALUE0":1000}}}},"next":{"block":{"type":"blockFlowRepeat","id":"f,pARbqa}?M;@5]n)Dd#","inputs":{"TIMES":{"shadow":{"type":"blockMathNumber","id":"`z=[t@OHF3ch`aI,)_@7","fields":{"NUM":4}}},"DO":{"block":{"type":"blockDriveBaseDrive","id":"*N9aUJzcUSr.jOD]ba!t","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_DRIVE_TURN"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"#}#RA0Cd{US3c=(04@Xh","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angle","id":"|r.U(JCJ*4urLZHWvwp1","fields":{"VALUE0":90}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"`2vv(zSxMz9^JFPz6-_W","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockDriveBaseDrive","id":":;k}x7#CvfpObR%W1#eV","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"#;h+_)0nufFtuRVA^)tG","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"J{~Rq+jxB?BlDisP@l-T","fields":{"VALUE0":100}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"jk[eL8U8Q`z)t!vx^,ML","fields":{"VALUE":"Stop.HOLD"}}}}}}}}}}}}}}}}}]},"variables":[{"name":"red","id":"1aX-EioU(]]|:}3-GH/u","type":"ColorDef"},{"name":"orange","id":"6:T:1v5Tt(F(E7veLXa:","type":"ColorDef"},{"name":"yellow","id":".(1xg!19Ah5^w:@oT32v","type":"ColorDef"},{"name":"green","id":"kP7OYW!n/=2W}Y8wvAYL","type":"ColorDef"},{"name":"cyan","id":"YGbAADX7x5^[hhVtuLO3","type":"ColorDef"},{"name":"blue","id":"@]!C{[m9~*GF7Q+y7j25","type":"ColorDef"},{"name":"violet","id":"{I1DDqvGl0:Qpm4-T!3%","type":"ColorDef"},{"name":"magenta","id":"j([@LQMT;B;iUmm`G[g`","type":"ColorDef"},{"name":"white","id":"_Ox.d2G2_UcfHn3qud,u","type":"ColorDef"},{"name":"none","id":"S!W-gUO%k$WbY=iS}PpZ","type":"ColorDef"},{"name":"prime hub","id":"^jB4/erwR`d?11mw)irR","type":"PrimeHub"},{"name":"drive base","id":"5+,,G;u8^8fk+H@cvwRx","type":"DriveBase"},{"name":"color sensor R","id":"i:h5wH3ca)*BMJ{HXTS,","type":"ColorSensor"},{"name":"color sensor L","id":"Dl}ZGfBep1FW)38J/7ck","type":"ColorSensor"},{"name":"LLM","id":"*)Xij(D^LX0bP*,|*},}","type":"Motor"},{"name":"RLM","id":"q+)l[,CUxiS/x(9L^DT)","type":"Motor"},{"name":"LMM","id":"d.G_{Xk3gi{.MgqyTw*v","type":"Motor"},{"name":"RMM","id":"iC+}r+I!,XK,qZzs1(yI","type":"Motor"},{"name":"square_test","id":"8PF}#EYc#qiyp60Z=hYp","type":"Function"}],"info":{"type":"pybricks","version":"1.3.2"}}
from pybricks.hubs import PrimeHub
from pybricks.parameters import Axis, Direction, Port, Stop
from pybricks.pupdevices import ColorSensor, Motor
from pybricks.robotics import DriveBase
from pybricks.tools import multitask, run_task, wait

# Set up all devices.
prime_hub = PrimeHub(top_side=Axis.Z, front_side=Axis.Y)
color_sensor_R = ColorSensor(Port.E)
color_sensor_L = ColorSensor(Port.A)
LLM = Motor(Port.D, Direction.COUNTERCLOCKWISE)
RLM = Motor(Port.F, Direction.CLOCKWISE)
LMM = Motor(Port.C, Direction.CLOCKWISE)
RMM = Motor(Port.B, Direction.CLOCKWISE)
drive_base = DriveBase(LLM, RLM, 56, 116)

async def subtask():
    await drive_base.straight(500)
    await wait(1000)
    await drive_base.straight(-500)

async def subtask2():
    await multitask(
        LMM.run_angle(500, 720),
        RMM.run_angle(500, -720),
    )

async def square_test():
    await wait(0)
    prime_hub.display.number(42)
    await prime_hub.speaker.beep(500, 1000)
    for count in range(4):
        await wait(0)
        await drive_base.turn(90)
        await drive_base.straight(100)

async def main():
    print('Hello, Pybricks!')
    await wait(2000)
    drive_base.settings(straight_speed=950)
    LLM.control.limits(acceleration=2000)
    RMM.control.limits(acceleration=2000)
    drive_base.use_gyro(True)
    drive_base.reset(0, 0)
    while not prime_hub.imu.stationary():
        await wait(0)
    prime_hub.imu.reset_heading(0)
    print(prime_hub.battery.voltage())
    await wait(3000)
    await prime_hub.speaker.beep(500, 1000)
    await multitask(
        subtask(),
        subtask2(),
    )
    await square_test()


run_task(main())