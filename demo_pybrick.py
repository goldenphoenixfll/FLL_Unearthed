# pybricks blocks file:{"blocks":{"languageVersion":0,"blocks":[{"type":"blockGlobalSetup","id":"bjK,wS1MYO7aiYkFSwd{","x":0,"y":0,"deletable":false,"next":{"block":{"type":"variables_set_prime_hub","id":"*nUOTiL!JOw_;+)fpxC|","extraState":{"optionLevel":1},"fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR"}},"inputs":{"AXIS_TOP":{"shadow":{"type":"blockParametersAxis","id":"Udyvsjad{AnnF77,+%0|","fields":{"VALUE":"z"}}},"AXIS_FRONT":{"shadow":{"type":"blockParametersAxis","id":"pZI3ey^U4HJRWn4Mapu1","fields":{"VALUE":"y"}}}},"next":{"block":{"type":"variables_set_motor","id":"Q_$hfMWr}JRfIW?5EMMW","fields":{"VAR":{"id":"*)Xij(D^LX0bP*,|*},}"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"Z}AZ`|XthZ4Ua{@6~XKk","fields":{"NAME":"D"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"yoXfaN_=V:{xK;D%U.$/","fields":{"SELECTION":"Direction.COUNTERCLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"I39g@d;O;pQ@ajNR*[2n","fields":{"VAR":{"id":"q+)l[,CUxiS/x(9L^DT)"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"r=LJfr*/U0zuzKP:[QHS","fields":{"NAME":"F"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"=(?ahtNj@7C4RQOEZS0p","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"B|;Q*+DFdk9!VQ{GV!7d","fields":{"VAR":{"id":"d.G_{Xk3gi{.MgqyTw*v"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"N7xUf*M;5[qR+h9rTbfo","fields":{"NAME":"C"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"7{;|`.c`4N|%n++f%i|^","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"w+Hr3Oqj0})|{SX?!E5!","fields":{"VAR":{"id":"iC+}r+I!,XK,qZzs1(yI"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"K@)]DK[hSZueL.CkMIyn","fields":{"NAME":"B"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"*?u!HfRF~#Eu%G_F54Nz","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_set_color_sensor","id":"E^L2Md%}}oH5WK{%8jfw","extraState":{"optionLevel":0},"fields":{"VAR":{"id":"i:h5wH3ca)*BMJ{HXTS,"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"X4U[NOBfd~c`,/AQHXt+","fields":{"NAME":"E"}}}},"next":{"block":{"type":"variables_set_color_sensor","id":"#.mH++([et8Tl^/4u)cd","extraState":{"optionLevel":0},"fields":{"VAR":{"id":"Dl}ZGfBep1FW)38J/7ck"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"U84sS$/O%bLYap;DiifH","fields":{"NAME":"A"}}}},"next":{"block":{"type":"variables_set_drive_base","id":"|GO.(/9P,mq0{B$O2uRM","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx"}},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"c_2GmXCgjIriBxBns!+0","fields":{"VAR":{"id":"*)Xij(D^LX0bP*,|*},}","name":"LLM","type":"Motor"}}}},"VAR2":{"shadow":{"type":"variables_get_motor_device","id":"K=L+r[8{8RqINWqolg3A","fields":{"VAR":{"id":"q+)l[,CUxiS/x(9L^DT)","name":"RLM","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_distance","id":"v@q9tSsA-I8J*l_CI9~)","fields":{"VALUE0":56}}},"VALUE1":{"shadow":{"type":"unit_distance","id":"o*Ztarg]=p(f}(z,xq{(","fields":{"VALUE0":116}}}},"next":{"block":{"type":"variables_setup_any","id":"x?wGmcm)ZaH$Zx3WDCVY","fields":{"VAR":{"id":"jYG[(Gd]CCQ^m)aApZzz"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":"6{6/VKre^L#5B]Vdk#B*","fields":{"NUM":1}}}},"next":{"block":{"type":"variables_setup_any","id":"L[+diLc*O,WoL+%RC7vv","fields":{"VAR":{"id":"gU@(1h[n(o[@.{wY/m8w"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":"[Pjj_M?4%nN!NM2BM/|u","fields":{"NUM":3}}}}}}}}}}}}}}}}}}}}}}}}},{"type":"blockGlobalStart","id":"3tJe|AWl0baN(wH9a$@.","x":-2,"y":597,"deletable":false,"next":{"block":{"type":"blockLightMatrixDo","id":"_Jjr!pptP{wg5]O*2eg*","extraState":{"optionLevel":1},"fields":{"METHOD":"LIGHT_MATRIX_NUMBER"},"inputs":{"VAR":{"shadow":{"type":"variables_get_light_matrix_hub","id":"]q,n$vR(F7zj=~Of~=3c","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"*@PG%mJfZo_{/(jI!{En","fields":{"NUM":42}},"block":{"type":"blockVariableGetValue","id":"c:y%JKgo+Ws:rrjLYFE?","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"IsH%%EBJWyQ6DrMyDQru","fields":{"VAR":{"id":"jYG[(Gd]CCQ^m)aApZzz","name":"run_number","type":"Any"}}}}}}}},"next":{"block":{"type":"blockPrint","id":"zIdxF4=FfiMW?IoAuVT@","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":";pyb1ugldPq$mIMCA_N-","fields":{"TEXT":"abc"}},"block":{"type":"blockVariableGetValue","id":".-XiJpAbCp%Hx(Wq|;eU","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"6[J2cD9wMIjI@|9)C8hG","fields":{"VAR":{"id":"jYG[(Gd]CCQ^m)aApZzz","name":"run_number","type":"Any"}}}}}}}},"next":{"block":{"type":"blockHubStopButton","id":"]OPxG|J+*)}pg=*)N-5.","inputs":{"VAR":{"shadow":{"type":"variables_get_button_hub","id":"m-^rPl#G;l-(CmY[^(C2","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"VALUE0":{"shadow":{"type":"blockParametersButton","id":"deLw50~?EL^TlYI+sYD!","fields":{"VALUE":"BLUETOOTH"}}}},"next":{"block":{"type":"blockWaitTime","id":"PQLCqSlO}e:!*YhQiBri","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"c^abc/L`:v0ObHjhiJ/9","fields":{"VALUE0":50}}}},"next":{"block":{"type":"blockFlowWhile","id":"+!#B?*oevZC;o.bfmISe","fields":{"MODE":"WHILE"},"inputs":{"BOOL":{"shadow":{"type":"blockLogicTrue","id":"sZsf6e7fGtkknvfBbR+k"}},"DO":{"block":{"type":"blockWaitTime","id":"P9*9uD6i9H1LtcyTroH)","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"7l0B97(vhHrM)cd=V^+G","fields":{"VALUE0":240}}}},"next":{"block":{"type":"blockWaitUntil","id":"SDh.,K]~`YI8~+cbeL$?","inputs":{"BOOL":{"shadow":{"type":"blockLogicTrue","id":"RCsZOE:XcGL#jYT%/u+u"},"block":{"type":"blockButtonIsPressed","id":"L5?LVRisnXX/.D^,=05T","inputs":{"VAR":{"shadow":{"type":"variables_get_keypad","id":"s]4ftahwNKVTkROe]]1N","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"VALUE0":{"shadow":{"type":"blockParametersButton","id":"xH,-XZ}l/GuR}-xG8^tB","fields":{"VALUE":"BUTTON_ANY"}}}}}}},"next":{"block":{"type":"blockIfElse","id":"h]({Q/TxiX./vwV_N/s]","extraState":{"optionLevel":1},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"2q8x~0IXgkmV@)Pr!$}U"},"block":{"type":"blockButtonIsPressed","id":"W8W`,s$%2s-y3{dzPTtT","inputs":{"VAR":{"shadow":{"type":"variables_get_keypad","id":"D37pBFtPMQzo3s9j=7/{","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"VALUE0":{"shadow":{"type":"blockParametersButton","id":"cf7-:k1EB#51m,+o?Sr#","fields":{"VALUE":"LEFT"}}}}}},"DO0":{"block":{"type":"blockVariableSetValue","id":"VQh)X25gNr/Y^Y9Zp)Tt","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"-8jUk-qLH:dBXe)Th1Le","fields":{"VAR":{"id":"jYG[(Gd]CCQ^m)aApZzz","name":"run_number","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"Pl+~NArhL2{7cgwHUAhm","fields":{"NUM":0}},"block":{"type":"blockMathArithmetic","id":"wq%_M![`XaoM#_c^%y,H","fields":{"OP":"ADD"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"7KD2[532Bbpku[~#4g-=","fields":{"NUM":1}},"block":{"type":"blockMathOp","id":"_fk~`c{I@D%,8{!MDc!1","extraState":{"optionLevel":1},"fields":{"OP":"MODULO"},"inputs":{"NUM":{"shadow":{"type":"blockMathNumber","id":"eukil(FjVj,U2Qg8W-K*","fields":{"NUM":0}},"block":{"type":"blockMathArithmetic","id":"]/^z,$6d57VI@{@#.T0U","fields":{"OP":"MINUS"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"Qyej(?e%dz~uP[%Gq`Im","fields":{"NUM":1}},"block":{"type":"blockMathArithmetic","id":"~)GL$3?NZMamfCUgZd.i","fields":{"OP":"MINUS"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"fk/]t-#B7!+4}OYUJl#f","fields":{"NUM":1}},"block":{"type":"blockVariableGetValue","id":";sco_!M-x`pMRW__Npal","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"cm8vKQ1PmU!dnu2HQRj-","fields":{"VAR":{"id":"jYG[(Gd]CCQ^m)aApZzz","name":"run_number","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"+j,~G/SHFQ5S;/D)msBD","fields":{"NUM":1}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"^8%IIkyipzHR0^,~9QG`","fields":{"NUM":1}}}}}},"NUM2":{"shadow":{"type":"blockMathNumber","id":"JZWDZ5XxF:WUlON6z_#k","enabled":false,"fields":{"NUM":0}},"block":{"type":"blockVariableGetValue","id":"r[~H4,/o6rf8J3QvW{[q","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"CTxW0X($rsGyPVDK)-h_","fields":{"VAR":{"id":"gU@(1h[n(o[@.{wY/m8w","name":"max_run","type":"Any"}}}}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"`l*AJ5}b=9a2]vxP`s@}","fields":{"NUM":1}}}}}}},"next":{"block":{"type":"blockPrint","id":"$OgW`KpPO,pbT}8lQbS^","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":";pyb1ugldPq$mIMCA_N-","fields":{"TEXT":"abc"}},"block":{"type":"blockVariableGetValue","id":"Hg!P4_!ft:t-){2YZNSp","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"Qs0;ddwfr#Fb/3_~.$UG","fields":{"VAR":{"id":"jYG[(Gd]CCQ^m)aApZzz","name":"run_number","type":"Any"}}}}}}}},"next":{"block":{"type":"blockLightMatrixDo","id":"CQb8@%Y9gKp?4GKhqtSv","extraState":{"optionLevel":1},"fields":{"METHOD":"LIGHT_MATRIX_NUMBER"},"inputs":{"VAR":{"shadow":{"type":"variables_get_light_matrix_hub","id":"Mxe!L0C%83UYc`l6y4Ky","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"*@PG%mJfZo_{/(jI!{En","fields":{"NUM":42}},"block":{"type":"blockVariableGetValue","id":".PUo95?^{ak+RoJzG%Tb","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"OXe`0r[ed69QCR}j/d+0","fields":{"VAR":{"id":"jYG[(Gd]CCQ^m)aApZzz","name":"run_number","type":"Any"}}}}}}}}}}}}}},"ELSE":{"block":{"type":"blockIfElse","id":"|r|_7|)$oKU);IcxTW:U","extraState":{"optionLevel":1},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"7JyFm:[%m4;P9V83u[_c"},"block":{"type":"blockButtonIsPressed","id":"B5%pB/DVr|@]u1)2]i+)","inputs":{"VAR":{"shadow":{"type":"variables_get_keypad","id":"o.;3-jjECy,z0dN7tyLt","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"VALUE0":{"shadow":{"type":"blockParametersButton","id":"gQwpAK.(Mipz(TZiLHey","fields":{"VALUE":"RIGHT"}}}}}},"DO0":{"block":{"type":"blockVariableSetValue","id":"c`0qNcSfW9^4@9w]VCz*","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"dt7H$d`]~*D!Rd::#xo|","fields":{"VAR":{"id":"jYG[(Gd]CCQ^m)aApZzz","name":"run_number","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"Pl+~NArhL2{7cgwHUAhm","fields":{"NUM":0}},"block":{"type":"blockMathArithmetic","id":"cqRpV2ls7G%#Jm0E|5`B","fields":{"OP":"ADD"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"7KD2[532Bbpku[~#4g-=","fields":{"NUM":1}},"block":{"type":"blockMathOp","id":"/df!04wa9IS*Ye^;$@zl","extraState":{"optionLevel":1},"fields":{"OP":"MODULO"},"inputs":{"NUM":{"shadow":{"type":"blockMathNumber","id":"eukil(FjVj,U2Qg8W-K*","fields":{"NUM":0}},"block":{"type":"blockMathArithmetic","id":",a:DG^*3v^[0N)G=Mg{/","fields":{"OP":"ADD"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"Qyej(?e%dz~uP[%Gq`Im","fields":{"NUM":1}},"block":{"type":"blockMathArithmetic","id":"z@l;dSq2xYuHZsFtd_[t","fields":{"OP":"MINUS"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"fk/]t-#B7!+4}OYUJl#f","fields":{"NUM":1}},"block":{"type":"blockVariableGetValue","id":"+`*RM:hRbUm[vEA.:D*Z","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"Luu$]2*[iy1./7vsgHKj","fields":{"VAR":{"id":"jYG[(Gd]CCQ^m)aApZzz","name":"run_number","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"Ll._+SxQA)gWP}=%Mxg3","fields":{"NUM":1}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"={ZKBmT9X{?t`8ZZ$]kk","fields":{"NUM":1}}}}}},"NUM2":{"shadow":{"type":"blockMathNumber","id":"JZWDZ5XxF:WUlON6z_#k","enabled":false,"fields":{"NUM":0}},"block":{"type":"blockVariableGetValue","id":"f2x*,Q-TvWbhJPviJzb2","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"^3{4ShsQ,kVB?[S|04j{","fields":{"VAR":{"id":"gU@(1h[n(o[@.{wY/m8w","name":"max_run","type":"Any"}}}}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"%I@QYc~P=2RxY;~8,o(8","fields":{"NUM":1}}}}}}},"next":{"block":{"type":"blockPrint","id":"wWl9;F4JsN/,K-+V,)C:","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":";pyb1ugldPq$mIMCA_N-","fields":{"TEXT":"abc"}},"block":{"type":"blockVariableGetValue","id":"YC]u3By%IoN3tTM=ALOq","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"2J@Jq*sAoPzz/Q.QZg{4","fields":{"VAR":{"id":"jYG[(Gd]CCQ^m)aApZzz","name":"run_number","type":"Any"}}}}}}}},"next":{"block":{"type":"blockLightMatrixDo","id":"Q?W7r{Pt2SU1HBh#{t!?","extraState":{"optionLevel":1},"fields":{"METHOD":"LIGHT_MATRIX_NUMBER"},"inputs":{"VAR":{"shadow":{"type":"variables_get_light_matrix_hub","id":"XRAY-!xC#f)m2txi!RHg","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"*@PG%mJfZo_{/(jI!{En","fields":{"NUM":42}},"block":{"type":"blockVariableGetValue","id":"!}R5ox))[jV]./rt~$Lk","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"sljz^c$.0w~~BiU]vjc,","fields":{"VAR":{"id":"jYG[(Gd]CCQ^m)aApZzz","name":"run_number","type":"Any"}}}}}}}}}}}}}},"ELSE":{"block":{"type":"blockIfElse","id":"}i.Q:B!}b3]CxkJ#v~bE","extraState":{"optionLevel":1},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"|QB}s8@;Dxyvrbfn]k4~"},"block":{"type":"blockButtonIsPressed","id":"{ypQMPW29@Yp#*K^+[-m","inputs":{"VAR":{"shadow":{"type":"variables_get_keypad","id":"6y@uw+5j54^ziLyr25]N","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"VALUE0":{"shadow":{"type":"blockParametersButton","id":"J8~(~zGem;=pZKe{nCB!","fields":{"VALUE":"CENTER"}}}}}},"DO0":{"block":{"type":"blockIfElse","id":"c-DAE]F[S?on=?tNvS@T","extraState":{"optionLevel":1},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"Gd0m:r9aB4A,t2[|Mw]="},"block":{"type":"blockLogicCompare","id":"8Gmk:,Tj,-kaMj;j8zpT","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"L=V(9T!tk2Rx[cV]7h}P","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":"}fOFpP#(^Ct|kn)TLJ6v","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"~=4{Np*@#a~;gQALBaHu","fields":{"VAR":{"id":"jYG[(Gd]CCQ^m)aApZzz","name":"run_number","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"e+jlEa@S7KIjEDBXwWi?","fields":{"NUM":1}}}}}},"DO0":{"block":{"type":"blockPrint","id":"|veob.S}a7t6=5q`4Kk=","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":";pyb1ugldPq$mIMCA_N-","fields":{"TEXT":"now running run1"}}}},"next":{"block":{"type":"blockFunctionCallerStatement","id":"CM+bXKW6}dyc^#oeI2r~","extraState":{"optionLevel":0},"fields":{"ICON":"TASK","VAR":{"id":"8PF}#EYc#qiyp60Z=hYp"}}}}}},"ELSE":{"block":{"type":"blockIfElse","id":"WRr%_]M`D+yoRQ|S%BAC","extraState":{"optionLevel":1},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":",g(0uPo4Oe:`)Ddt:?x="},"block":{"type":"blockLogicCompare","id":"4j$rNxEE%{uR?#vzRxz+","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"L=V(9T!tk2Rx[cV]7h}P","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":"^7L)ep=y{CG?!),EBy2r","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"(ca~1iR)D6CQZ6XaYi/G","fields":{"VAR":{"id":"jYG[(Gd]CCQ^m)aApZzz","name":"run_number","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":",_Tpj`|XdR,#4RX0f}1a","fields":{"NUM":2}}}}}},"DO0":{"block":{"type":"blockPrint","id":"`(Y|Iq[rpG+kN;H,^6r;","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"XcZ-ZFTp{tTV(_g;CI8X","fields":{"TEXT":"now running run2"}}}},"next":{"block":{"type":"blockFunctionCallerStatement","id":"F=0@p$]o,^*J#p#z2Zmu","extraState":{"optionLevel":0},"fields":{"ICON":"TASK","VAR":{"id":"-fE!ST/2S(LFSmO0_0_l"}}}}}},"ELSE":{"block":{"type":"blockIfElse","id":"+]eagjAHs|DCi0C~3}]x","extraState":{"optionLevel":1},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":";blnk%_^58npT:/[RR%9"},"block":{"type":"blockLogicCompare","id":"6~N|:=9ht|tOQO;/-6f1","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"L=V(9T!tk2Rx[cV]7h}P","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":":RFedm(z:]88PQ$%R,Y]","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"RbBOB-/iYYsxIJXitZjp","fields":{"VAR":{"id":"jYG[(Gd]CCQ^m)aApZzz","name":"run_number","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"sUNDp.hoQOdK*|K-3~+b","fields":{"NUM":3}}}}}},"DO0":{"block":{"type":"blockPrint","id":":sI];tw5~*t|xsRWpq!J","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":",k~GkL)O/E^~NwO]K-Pz","fields":{"TEXT":"now running run3"}}}},"next":{"block":{"type":"blockFunctionCallerStatement","id":"|dsSNKQr660QfOtJ7`UV","extraState":{"optionLevel":0},"fields":{"ICON":"TASK","VAR":{"id":"1M~8`],0JEj!U]`4#vUM"}}}}}},"ELSE":{"block":{"type":"blockPrint","id":"4A058r(7g8m6|h0Pcbdc","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"7z2sY~WI#0o~|F:;2eJz","fields":{"TEXT":"exit"}}}},"next":{"block":{"type":"blockFlowBreakContinue","id":"[vr}(6[1wU@=JW$6U4fU","fields":{"FLOW":"BREAK"}}}}}}}}}}}}}},"ELSE":{"block":{"type":"blockFlowBreakContinue","id":"TM])0_DQLR,?{#$_|H4s","fields":{"FLOW":"CONTINUE"}}}}}}}}}}}}}}}}}}}}}}}}}}}},{"type":"variables_setup_function","id":"{xcEMqK9HnaJ;=#@eH_]","x":769,"y":554,"extraState":{"optionLevel":0},"fields":{"ICON":"TASK","VAR":{"id":"8PF}#EYc#qiyp60Z=hYp"}},"inputs":{"STACK":{"block":{"type":"blockSpeakerBeep","id":"f2}R8|%7F^1J*CPi~+U~","inputs":{"VAR":{"shadow":{"type":"variables_get_speaker_hub","id":"{4R%wL(-VV/TtFK?624v","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"VALUE0":{"shadow":{"type":"unit_frequency","id":"FyF|l3p_ZNO-qa7g|7pY","fields":{"VALUE0":500}}},"VALUE1":{"shadow":{"type":"unit_time","id":"/$!g$mmV}/;~o+PD*/p8","fields":{"VALUE0":1000}}}},"next":{"block":{"type":"blockFlowRepeat","id":"f,pARbqa}?M;@5]n)Dd#","inputs":{"TIMES":{"shadow":{"type":"blockMathNumber","id":"`z=[t@OHF3ch`aI,)_@7","fields":{"NUM":4}}},"DO":{"block":{"type":"blockDriveBaseDrive","id":"*N9aUJzcUSr.jOD]ba!t","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_DRIVE_TURN"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"#}#RA0Cd{US3c=(04@Xh","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angle","id":"|r.U(JCJ*4urLZHWvwp1","fields":{"VALUE0":90}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"`2vv(zSxMz9^JFPz6-_W","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockDriveBaseDrive","id":":;k}x7#CvfpObR%W1#eV","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"#;h+_)0nufFtuRVA^)tG","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"J{~Rq+jxB?BlDisP@l-T","fields":{"VALUE0":100}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"jk[eL8U8Q`z)t!vx^,ML","fields":{"VALUE":"Stop.HOLD"}}}}}}}}},"next":{"block":{"type":"blockDriveBaseStop","id":"(Yv+w-ii8{F%iaG}zCv3","inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"=A^-i_2Q0{Ea:pL(;%sB","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"VALUE0":{"shadow":{"type":"parameters_stop_3","id":"dag:3J!GX6r3f]TOC}y0","fields":{"VALUE":"Stop.COAST"}}}}}}}}}}}},{"type":"variables_setup_function","id":"-Y;)A/:ta~mE20#-dul!","x":1538,"y":164,"extraState":{"optionLevel":0},"fields":{"ICON":"TASK","VAR":{"id":"-fE!ST/2S(LFSmO0_0_l"}},"inputs":{"STACK":{"block":{"type":"blockDriveBaseConfigure","id":"($48ZzpK#s5:3D3H]F1D","extraState":{"optionLevel":1},"fields":{"METHOD":"DRIVEBASE_STRAIGHT_SPEED"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"d|fZM4Yy$Nu61+Fc8zpm","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_speed","id":"imy:5ZE(|3z.;zrL`^[h","fields":{"VALUE0":950}}}},"next":{"block":{"type":"blockMotorConfigure","id":"RZl._9W;@${^nO:%hU.1","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_ACCELERATION"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"q[fz(=eC(avR#eqkgAS@","fields":{"VAR":{"id":"*)Xij(D^LX0bP*,|*},}","name":"LLM","type":"Motor"}}}},"ARG0":{"shadow":{"type":"unit_angularAcceleration","id":"WEX53Aq^)4)c5-D(^-L3","fields":{"VALUE0":2000}}}},"next":{"block":{"type":"blockMotorConfigure","id":"fhaPzv4H0XA~bO*aCe;(","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_ACCELERATION"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"|{jdXsK%3+gdt_jfhmh3","fields":{"VAR":{"id":"iC+}r+I!,XK,qZzs1(yI","name":"RMM","type":"Motor"}}}},"ARG0":{"shadow":{"type":"unit_angularAcceleration","id":"!8BRD)zh31r*Pa8/T)vh","fields":{"VALUE0":2000}}}},"next":{"block":{"type":"blockDriveBaseUseGyro","id":"7OHurVpMP!fnCMb`tLr2","fields":{"METHOD":"DRIVEBASE_USE_GYRO_TRUE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"QE//:Q$rz64TkYsTcAz_","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}}},"next":{"block":{"type":"blockDriveBaseResetWithValues","id":"0)T17tUFMGxgT$,U~5_Y","inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"ufO3P+[t:i,-{i@FK2vG","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"VALUE0":{"shadow":{"type":"unit_distance","id":"AA~T.6w?HR^l+hxdi5NB","fields":{"VALUE0":0}}},"VALUE1":{"shadow":{"type":"unit_angle","id":"#{]b3k/;XxJ`}ZUcTE*5","fields":{"VALUE0":0}}}},"next":{"block":{"type":"blockImuResetHeading","id":"Q8HmfpA6)j5^Zc(AiL@9","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"=jz9`R3b?)Pe6`2u?J^@","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"VALUE0":{"shadow":{"type":"unit_angle","id":"[kuK0pAf+St0e`jH__3]","fields":{"VALUE0":0}}}},"next":{"block":{"type":"blockPrint","id":"`8iv:xWiM,)I1!OKQ/tF","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"|^2iP_NG%}rR}P;0zeDx","fields":{"TEXT":"abc"}},"block":{"type":"blockBatteryMeasure","id":"/{)+(uTG(HcN6Wh_rW];","extraState":{"optionLevel":0},"fields":{"METHOD":"BATTERY_GET_VOLTAGE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_battery_hub","id":"#~xiB/_2w|vwF+1o0/Bk","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}}}}}},"next":{"block":{"type":"blockWaitTime","id":"vy92+75Ia/?+7JMEd/gB","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"@qurpXpGN==[*alBCn|Q","fields":{"VALUE0":50}}}},"next":{"block":{"type":"blockSpeakerBeep","id":"|1Cg`c;4JgpbOvB2[=k8","inputs":{"VAR":{"shadow":{"type":"variables_get_speaker_hub","id":":29=5P6u8^,:nPRFqbaJ","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"VALUE0":{"shadow":{"type":"unit_frequency","id":"Z5KsGyA%P9Kc!R3]T#eR","fields":{"VALUE0":500}}},"VALUE1":{"shadow":{"type":"unit_time","id":"/K1/%n0]T)~3SU4Z*IP1","fields":{"VALUE0":1000}}}},"next":{"block":{"type":"blockMultiTask","id":"]5~qT89w5^kuo4C`;n:@","extraState":{"optionLevel":0},"fields":{"METHOD":"MULTITASK_ALL"},"inputs":{"TASK0":{"block":{"type":"blockDriveBaseDrive","id":"!$`@#D,=3zLL~s;+8u`M","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"Kl:{{E]jL:[?kWl}cOqF","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"kpl+H-(qaEd[}Yl0GBjJ","fields":{"VALUE0":500}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"3.x%6#,FQKI/PGC)%OH.","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockWaitTime","id":"$)[cCSf24?Vp_L:0yi=G","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"bHC6=^97Nu98PwU1(_$J","fields":{"VALUE0":1000}}}},"next":{"block":{"type":"blockDriveBaseDrive","id":"!MRP$88^H,cg6-X)x[h9","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"e14U/y_PDQ4vLM;p|on~","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"S-B8|q/njf|gu~K)KwL7","fields":{"VALUE0":-500}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"QV+4PSyoT9(B=`tXNgi*","fields":{"VALUE":"Stop.HOLD"}}}}}}}}}},"TASK1":{"block":{"type":"blockMultiTask","id":"z8JCO0qyYDTMBP99XV7d","extraState":{"optionLevel":0},"fields":{"METHOD":"MULTITASK_ALL"},"inputs":{"TASK0":{"block":{"type":"blockMotorRun","id":"wcPm5dcP|_g$]FmNm*Eu","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_RUN_FOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"0WUi^K2T.*3!pK:F)[o!","fields":{"VAR":{"id":"d.G_{Xk3gi{.MgqyTw*v","name":"LMM","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"^90w)ib1`7TE6BwNX^!N","fields":{"VALUE0":500}}},"ANGLE":{"shadow":{"type":"unit_angle","id":"!|UWFl{4zwZ.p(J_fF$?","fields":{"VALUE0":720}}},"THEN":{"shadow":{"type":"parameters_stop_4","id":"I(J,/-(]|JHKCsxBO{n}","fields":{"VALUE":"Stop.HOLD"}}}}}},"TASK1":{"block":{"type":"blockMotorRun","id":"DwShKtha!Uy?d!:Iy7}V","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_RUN_FOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"vFN)VFz%gW%TyN3adwW%","fields":{"VAR":{"id":"iC+}r+I!,XK,qZzs1(yI","name":"RMM","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"S/$m6cDEhk|nLT:MA8sq","fields":{"VALUE0":500}}},"ANGLE":{"shadow":{"type":"unit_angle","id":"[jd/fs#p[?t7M$g~1B|D","fields":{"VALUE0":-720}}},"THEN":{"shadow":{"type":"parameters_stop_4","id":"Z8k#iu04!}DAZ1kD]H2p","fields":{"VALUE":"Stop.HOLD"}}}}}}}}}},"next":{"block":{"type":"blockDriveBaseStop","id":"-u0yu}i^%Y~_`LRwh/o:","inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"5J;$51{tu^-}$iC.^1oi","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"VALUE0":{"shadow":{"type":"parameters_stop_3","id":"|V/VBl74~+dQfi-..[jH","fields":{"VALUE":"Stop.HOLD"}}}}}}}}}}}}}}}}}}}}}}}}}}}},{"type":"variables_setup_function","id":"c5nr+i7`]VAj(waB~T/~","x":1137,"y":1195,"extraState":{"optionLevel":0},"fields":{"ICON":"TASK","VAR":{"id":"1M~8`],0JEj!U]`4#vUM"}},"inputs":{"STACK":{"block":{"type":"blockSpeakerBeep","id":"*CSk:it(BKy6u+83FRHE","inputs":{"VAR":{"shadow":{"type":"variables_get_speaker_hub","id":"2vz+HPj-AbE@n*{Ho!Db","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"VALUE0":{"shadow":{"type":"unit_frequency","id":"QnZjYMMr@LcGw/~K%GvY","fields":{"VALUE0":420}}},"VALUE1":{"shadow":{"type":"unit_time","id":"Ke0-2|QiuE1oaOa,D!zG","fields":{"VALUE0":1000}}}},"next":{"block":{"type":"blockDriveBaseUseGyro","id":"+gwLD{QBKIM*SHTOOG^t","fields":{"METHOD":"DRIVEBASE_USE_GYRO_FALSE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"9lKM4znsxtU);DT9?Q,=","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}}},"next":{"block":{"type":"blockDriveBaseUseGyro","id":",vgR{/.4l/gLMHGmC7Ku","fields":{"METHOD":"DRIVEBASE_USE_GYRO_TRUE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"vPiL9hd]/p:z](hl4Cwa","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}}},"next":{"block":{"type":"blockImuResetHeading","id":"(-19%JmH@Y)(!zQ--t.~","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"r{kpU:Rp2)xr2s,5ST7U","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}},"VALUE0":{"shadow":{"type":"unit_angle","id":"NP^0OLz{=$.SqHN$I@Ml","fields":{"VALUE0":0}}}},"next":{"block":{"type":"blockFlowRepeat","id":"oACw,mdM5Q$%V85mJ?)I","inputs":{"TIMES":{"shadow":{"type":"blockMathNumber","id":"F1OGU!%BQ)_!AX6c8*?m","fields":{"NUM":4}}},"DO":{"block":{"type":"blockDriveBaseDrive","id":"0.ws(6d6(A5zm?)~{v*}","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_DRIVE_TURN"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"BPI^;*lT6k`#c$Bn#[BX","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angle","id":"0I?D,EF1W.}Eg=B8tajl","fields":{"VALUE0":-179}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"LWrs0Sho#2Khtfc%w6S[","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockDriveBaseDrive","id":"%JV`M*4UJMs(w^|BZ(Z?","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"9|mlr;Os[ZKcAbOT,|xe","fields":{"VAR":{"id":"5+,,G;u8^8fk+H@cvwRx","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"*63N2lw9G8Lqxg[/PFmr","fields":{"VALUE0":200}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"k#HK{/l=II]z~k#GYAqX","fields":{"VALUE":"Stop.HOLD"}}}}}}}}},"next":{"block":{"type":"blockPrint","id":"!!X?D,g?GWJ-z#:89Y:9","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"|^2iP_NG%}rR}P;0zeDx","fields":{"TEXT":"abc"}},"block":{"type":"blockBatteryMeasure","id":"njZdOluci*w_ArI[,yWw","extraState":{"optionLevel":0},"fields":{"METHOD":"BATTERY_GET_VOLTAGE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_battery_hub","id":"Oj,k_1Jf,cNyGXRvNK[W","fields":{"VAR":{"id":"^jB4/erwR`d?11mw)irR","name":"prime hub","type":"PrimeHub"}}}}}}}}}}}}}}}}}}}}}}]},"variables":[{"name":"red","id":"1aX-EioU(]]|:}3-GH/u","type":"ColorDef"},{"name":"orange","id":"6:T:1v5Tt(F(E7veLXa:","type":"ColorDef"},{"name":"yellow","id":".(1xg!19Ah5^w:@oT32v","type":"ColorDef"},{"name":"green","id":"kP7OYW!n/=2W}Y8wvAYL","type":"ColorDef"},{"name":"cyan","id":"YGbAADX7x5^[hhVtuLO3","type":"ColorDef"},{"name":"blue","id":"@]!C{[m9~*GF7Q+y7j25","type":"ColorDef"},{"name":"violet","id":"{I1DDqvGl0:Qpm4-T!3%","type":"ColorDef"},{"name":"magenta","id":"j([@LQMT;B;iUmm`G[g`","type":"ColorDef"},{"name":"white","id":"_Ox.d2G2_UcfHn3qud,u","type":"ColorDef"},{"name":"none","id":"S!W-gUO%k$WbY=iS}PpZ","type":"ColorDef"},{"name":"prime hub","id":"^jB4/erwR`d?11mw)irR","type":"PrimeHub"},{"name":"drive base","id":"5+,,G;u8^8fk+H@cvwRx","type":"DriveBase"},{"name":"color sensor R","id":"i:h5wH3ca)*BMJ{HXTS,","type":"ColorSensor"},{"name":"color sensor L","id":"Dl}ZGfBep1FW)38J/7ck","type":"ColorSensor"},{"name":"LLM","id":"*)Xij(D^LX0bP*,|*},}","type":"Motor"},{"name":"RLM","id":"q+)l[,CUxiS/x(9L^DT)","type":"Motor"},{"name":"LMM","id":"d.G_{Xk3gi{.MgqyTw*v","type":"Motor"},{"name":"RMM","id":"iC+}r+I!,XK,qZzs1(yI","type":"Motor"},{"name":"run1","id":"8PF}#EYc#qiyp60Z=hYp","type":"Function"},{"name":"run2","id":"-fE!ST/2S(LFSmO0_0_l","type":"Function"},{"name":"run3","id":"1M~8`],0JEj!U]`4#vUM","type":"Function"},{"name":"run_number","id":"jYG[(Gd]CCQ^m)aApZzz","type":"Any"},{"name":"max_run","id":"gU@(1h[n(o[@.{wY/m8w","type":"Any"},{"name":"data","id":"[.3uvPxrdV!/H)]7E%$-","type":"Any"}],"info":{"type":"pybricks","version":"1.3.2"}}
from pybricks.hubs import PrimeHub
from pybricks.parameters import Axis, Button, Direction, Port, Stop
from pybricks.pupdevices import ColorSensor, Motor
from pybricks.robotics import DriveBase
from pybricks.tools import multitask, run_task, wait

# Set up all devices.
prime_hub = PrimeHub(top_side=Axis.Z, front_side=Axis.Y)
color_sensor_R = ColorSensor(Port.E)
color_sensor_L = ColorSensor(Port.A)
LLM = Motor(Port.D, Direction.COUNTERCLOCKWISE)
RLM = Motor(Port.F, Direction.CLOCKWISE)
LMM = Motor(Port.C, Direction.CLOCKWISE)
RMM = Motor(Port.B, Direction.CLOCKWISE)
drive_base = DriveBase(LLM, RLM, 56, 116)

# Initialize variables.
run_number = 1
max_run = 3

async def subtask():
    await drive_base.straight(500)
    await wait(1000)
    await drive_base.straight(-500)

async def subtask2():
    await multitask(
        LMM.run_angle(500, 720),
        RMM.run_angle(500, -720),
    )

async def run2():
    await wait(0)
    drive_base.settings(straight_speed=950)
    LLM.control.limits(acceleration=2000)
    RMM.control.limits(acceleration=2000)
    drive_base.use_gyro(True)
    drive_base.reset(0, 0)
    prime_hub.imu.reset_heading(0)
    print(prime_hub.battery.voltage())
    await wait(50)
    await prime_hub.speaker.beep(500, 1000)
    await multitask(
        subtask(),
        subtask2(),
    )
    drive_base.straight(0)

async def run1():
    await wait(0)
    await prime_hub.speaker.beep(500, 1000)
    for count in range(4):
        await wait(0)
        await drive_base.turn(90)
        await drive_base.straight(100)
    drive_base.stop()

async def run3():
    await wait(0)
    await prime_hub.speaker.beep(420, 1000)
    drive_base.use_gyro(False)
    drive_base.use_gyro(True)
    prime_hub.imu.reset_heading(0)
    for count2 in range(4):
        await wait(0)
        await drive_base.turn(-179)
        await drive_base.straight(200)
    print(prime_hub.battery.voltage())

async def main():
    global run_number
    prime_hub.display.number(run_number)
    print(run_number)
    prime_hub.system.set_stop_button(Button.BLUETOOTH)
    await wait(50)
    while True:
        await wait(0)
        await wait(240)
        while not any(prime_hub.buttons.pressed()):
            await wait(0)
        if Button.LEFT in prime_hub.buttons.pressed():
            run_number = ((run_number - 1) - 1) % max_run + 1
            print(run_number)
            prime_hub.display.number(run_number)
        else:
            if Button.RIGHT in prime_hub.buttons.pressed():
                run_number = ((run_number - 1) + 1) % max_run + 1
                print(run_number)
                prime_hub.display.number(run_number)
            else:
                if Button.CENTER in prime_hub.buttons.pressed():
                    if run_number == 1:
                        print('now running run1')
                        await run1()
                    else:
                        if run_number == 2:
                            print('now running run2')
                            await run2()
                        else:
                            if run_number == 3:
                                print('now running run3')
                                await run3()
                            else:
                                print('exit')
                                break
                else:
                    continue


run_task(main())